<script>
  //<![CDATA[
  document.addEventListener("DOMContentLoaded", function (event) {
    const anchors = document.querySelectorAll("a");
    anchors.forEach(anchor => {
      anchor.href = anchor.href
              .replace('github.com/solid/specification-tests/', 'github.com/solid/specification-tests/blob/main/')
              .replace('github.com/solid/conformance-test-harness/', 'github.com/solid/conformance-test-harness/blob/main/')
    })

    function openTarget() {
      const hash = location.hash.substring(1);
      if (hash) {
        const details = document.getElementById(hash);
        if (details && details.tagName.toLowerCase() === 'details') {
          details.open = true;
          const parentDetails = details.parentElement.closest('details')
          if (parentDetails) {
            parentDetails.open = true;
          }
          details.scrollIntoView();
        }
      }
    }
    window.addEventListener('hashchange', openTarget);
    openTarget();
  });

  function openAll(elem) {
    elem.parentElement.querySelectorAll('details').forEach(d => d.open = true);
  }

  function openFailed(elem) {
    elem.parentElement.querySelectorAll('details').forEach(d => d.open = false);
    elem.parentElement.querySelectorAll('details.failed').forEach(d => {
      d.open = true;
      const parentDetails = d.parentElement.closest('details')
      if (parentDetails) {
        parentDetails.open = true;
      }
    });
  }

  function closeAll(elem) {
    elem.parentElement.querySelectorAll('details').forEach(d => d.open = false);
  }

  //]]>
</script>
